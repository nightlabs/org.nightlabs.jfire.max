<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.14" id="1">
    <property name="createdBy">Eclipse BIRT Designer Version 1.0.1 Build &lt;20051201-1157></property>
    <property name="units">mm</property>
    <property name="includeResource">reportMessages</property>
    <method name="initialize"><![CDATA[// Import the JFireReportingHelper
importClass(Packages.org.nightlabs.jfire.reporting.JFireReportingHelper);
// Import the JDOHelper
importClass(Packages.javax.jdo.JDOHelper);
// Resolve the articleContainer for this report
// getJDOObject takes a string
articleContainer = JFireReportingHelper.getJDOObject(params["articleContainerID"]);
JFireReportingHelper.getLogger().debug("Have articleContainer: " + articleContainer);
// Remember the articleContainer
JFireReportingHelper.getVars().put("articleContainer", articleContainer);

JFireReportingHelper.getVars().put(
    "priceFragmentType2currency2sum", 
    new Packages.java.util.HashMap());

headerFirstRow = true;

/**
 * This function checks whether the given instance of
 * the given productTypeID is of type DynamicProduct
 */
function isDynamicProduct(productJDOID) {
  product = JFireReportingHelper.getJDOObject(productJDOID);
  // We do not use an instanceof check, because that would cause an exception, if the DynamicTrade
  // module is not installed. Since there is no subclass of DynamicProduct, we don't need to check
  // the super-classes.
  return product.getClass().getName() == "org.nightlabs.jfire.dynamictrade.store.DynamicProduct";
}

function isBundleProduct(productJDOID) {
  product = JFireReportingHelper.getJDOObject(productJDOID);
  return product instanceof Packages.org.nightlabs.jfire.store.BundleProduct;
}

function getLocalizedMessage(key) {
  msg = reportContext.getMessage(key, reportContext.getLocale());
  if (msg != null && "".equals(msg)) {
    return msg;
  }
  return "";
}

function getDataFieldString(field) {
  if (field != null && field.getData() != null && !"".equals(field.getData)) {
    return field.getData();
  } 
  return "";
}]]></method>
    <parameters>
        <scalar-parameter name="articleContainerID" id="136">
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
    </parameters>
    <data-sources>
        <oda-data-source extensionID="org.nightlabs.jfire.reporting.oda.jfs.JFSDriver" name="JFS-Datasource" id="120">
            <text-property name="displayName">Data Source1</text-property>
        </oda-data-source>
        <script-data-source name="JS-Datasource" id="279"/>
    </data-sources>
    <data-sets>
        <oda-data-set extensionID="org.nightlabs.jfire.reporting.oda.jfs.JFSDataSet" name="InvoiceArticles" id="137">
            <text-property name="displayName">Articles</text-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">articleJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">articleID</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">allocated</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">allocationPending</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">delivered</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">deliveryJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">7</property>
                        <property name="name">deliveryNoteJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">8</property>
                        <property name="name">createDT</property>
                        <property name="dataType">date</property>
                    </structure>
                    <structure>
                        <property name="position">9</property>
                        <property name="name">createUserID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">10</property>
                        <property name="name">createUserJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">11</property>
                        <property name="name">currencyID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">12</property>
                        <property name="name">currencyJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">13</property>
                        <property name="name">invoiceJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">14</property>
                        <property name="name">offerJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">15</property>
                        <property name="name">orderJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">16</property>
                        <property name="name">productJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">17</property>
                        <property name="name">productTypeJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">18</property>
                        <property name="name">productTypeName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">19</property>
                        <property name="name">receptionNoteJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">20</property>
                        <property name="name">reversed</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">21</property>
                        <property name="name">reversingArticleJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">22</property>
                        <property name="name">reversing</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">23</property>
                        <property name="name">reversedArticleJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">24</property>
                        <property name="name">tariffJDOID</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">25</property>
                        <property name="name">tariffName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">26</property>
                        <property name="name">${devOrganisationIDConverted}/__Total__</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">27</property>
                        <property name="name">${rootOrganisationIDConverted}/vat-ch-7__6-net</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">28</property>
                        <property name="name">${rootOrganisationIDConverted}/vat-ch-7__6-val</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">29</property>
                        <property name="name">${rootOrganisationIDConverted}/vat-de-19-net</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">30</property>
                        <property name="name">${rootOrganisationIDConverted}/vat-de-19-val</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">31</property>
                        <property name="name">${rootOrganisationIDConverted}/vat-de-7-net</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">32</property>
                        <property name="name">${rootOrganisationIDConverted}/vat-de-7-val</property>
                        <property name="dataType">float</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">JFS-Datasource</property>
            <list-property name="parameters">
                <structure>
                    <property name="name">articleContainerID</property>
                    <property name="nativeName">articleContainerID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                    <property name="position">1</property>
                    <expression name="defaultValue">'""'</expression>
                    <property name="isOptional">false</property>
                    <property name="allowNull">true</property>
                    <property name="isInput">true</property>
                </structure>
            </list-property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">articleJDOID</property>
                    <property name="nativeName">articleJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">articleID</property>
                    <property name="nativeName">articleID</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">6</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">allocated</property>
                    <property name="nativeName">allocated</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">allocationPending</property>
                    <property name="nativeName">allocationPending</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">delivered</property>
                    <property name="nativeName">delivered</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">deliveryJDOID</property>
                    <property name="nativeName">deliveryJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">7</property>
                    <property name="name">deliveryNoteJDOID</property>
                    <property name="nativeName">deliveryNoteJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">8</property>
                    <property name="name">createDT</property>
                    <property name="nativeName">createDT</property>
                    <property name="dataType">date</property>
                    <property name="nativeDataType">5</property>
                </structure>
                <structure>
                    <property name="position">9</property>
                    <property name="name">createUserID</property>
                    <property name="nativeName">createUserID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">10</property>
                    <property name="name">createUserJDOID</property>
                    <property name="nativeName">createUserJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">11</property>
                    <property name="name">currencyID</property>
                    <property name="nativeName">currencyID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">12</property>
                    <property name="name">currencyJDOID</property>
                    <property name="nativeName">currencyJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">13</property>
                    <property name="name">invoiceJDOID</property>
                    <property name="nativeName">invoiceJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">14</property>
                    <property name="name">offerJDOID</property>
                    <property name="nativeName">offerJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">15</property>
                    <property name="name">orderJDOID</property>
                    <property name="nativeName">orderJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">16</property>
                    <property name="name">productJDOID</property>
                    <property name="nativeName">productJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">17</property>
                    <property name="name">productTypeJDOID</property>
                    <property name="nativeName">productTypeJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">18</property>
                    <property name="name">productTypeName</property>
                    <property name="nativeName">productTypeName</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">19</property>
                    <property name="name">receptionNoteJDOID</property>
                    <property name="nativeName">receptionNoteJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">20</property>
                    <property name="name">reversed</property>
                    <property name="nativeName">reversed</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                </structure>
                <structure>
                    <property name="position">21</property>
                    <property name="name">reversingArticleJDOID</property>
                    <property name="nativeName">reversingArticleJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">22</property>
                    <property name="name">reversing</property>
                    <property name="nativeName">reversing</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">4</property>
                </structure>
                <structure>
                    <property name="position">23</property>
                    <property name="name">reversedArticleJDOID</property>
                    <property name="nativeName">reversedArticleJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">24</property>
                    <property name="name">tariffJDOID</property>
                    <property name="nativeName">tariffJDOID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">25</property>
                    <property name="name">tariffName</property>
                    <property name="nativeName">tariffName</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">26</property>
                    <property name="name">${devOrganisationIDConverted}/__Total__</property>
                    <property name="nativeName">${devOrganisationIDConverted}/__Total__</property>
                    <property name="dataType">float</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">27</property>
                    <property name="name">${rootOrganisationIDConverted}/vat-ch-7__6-net</property>
                    <property name="nativeName">${rootOrganisationIDConverted}/vat-ch-7__6-net</property>
                    <property name="dataType">float</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">28</property>
                    <property name="name">${rootOrganisationIDConverted}/vat-ch-7__6-val</property>
                    <property name="nativeName">${rootOrganisationIDConverted}/vat-ch-7__6-val</property>
                    <property name="dataType">float</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">29</property>
                    <property name="name">${rootOrganisationIDConverted}/vat-de-19-net</property>
                    <property name="nativeName">${rootOrganisationIDConverted}/vat-de-19-net</property>
                    <property name="dataType">float</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">30</property>
                    <property name="name">${rootOrganisationIDConverted}/vat-de-19-val</property>
                    <property name="nativeName">${rootOrganisationIDConverted}/vat-de-19-val</property>
                    <property name="dataType">float</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">31</property>
                    <property name="name">${rootOrganisationIDConverted}/vat-de-7-net</property>
                    <property name="nativeName">${rootOrganisationIDConverted}/vat-de-7-net</property>
                    <property name="dataType">float</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">32</property>
                    <property name="name">${rootOrganisationIDConverted}/vat-de-7-val</property>
                    <property name="nativeName">${rootOrganisationIDConverted}/vat-de-7-val</property>
                    <property name="dataType">float</property>
                    <property name="nativeDataType">3</property>
                </structure>
            </list-property>
            <property name="queryText">&lt;queryPropertySet>&lt;org.nightlabs.jfire.reporting.oda.jfs.JFSQueryPropertySet>
  &lt;scriptRegistryItemID>
    &lt;organisationID>dev.jfire.org&lt;/organisationID>
    &lt;scriptRegistryItemType>JFireReportingTrade-Scripting-ArticleContainerData&lt;/scriptRegistryItemType>
    &lt;scriptRegistryItemID>ArticleList&lt;/scriptRegistryItemID>
  &lt;/scriptRegistryItemID>
  &lt;properties class="tree-map">
    &lt;no-comparator/>
  &lt;/properties>
&lt;/org.nightlabs.jfire.reporting.oda.jfs.JFSQueryPropertySet>&lt;/queryPropertySet></property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>1.0</Version>
  <design:DataSetParameters>
    <design:parameterDefinitions>
      <design:inOutMode>In</design:inOutMode>
      <design:attributes>
        <design:name>articleContainerID</design:name>
        <design:position>1</design:position>
        <design:nativeDataTypeCode>1</design:nativeDataTypeCode>
        <design:precision>0</design:precision>
        <design:scale>0</design:scale>
        <design:nullability>Nullable</design:nullability>
      </design:attributes>
      <design:inputAttributes>
        <design:elementAttributes>
          <design:defaultScalarValue>&quot;&quot;</design:defaultScalarValue>
        </design:elementAttributes>
      </design:inputAttributes>
    </design:parameterDefinitions>
  </design:DataSetParameters>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.nightlabs.jfire.reporting.oda.jfs.JFSDataSet" name="CustomerPropretySet" id="171">
            <text-property name="displayName">CustomerPropretySet</text-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">DisplayName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">BankData_AccountHolder</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">BankData_AccountNumber</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">BankData_BankCode</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">BankData_BankName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">Comment_Comment</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">7</property>
                        <property name="name">CreditCard_CreditCardHolder</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">8</property>
                        <property name="name">CreditCard_ExpiryMonth</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">9</property>
                        <property name="name">CreditCard_ExpiryYear</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">10</property>
                        <property name="name">CreditCard_Number</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">11</property>
                        <property name="name">Internet_EMail</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">12</property>
                        <property name="name">Internet_Homepage</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">13</property>
                        <property name="name">PersonalData_Company</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">14</property>
                        <property name="name">PersonalData_DateOfBirth</property>
                        <property name="dataType">date</property>
                    </structure>
                    <structure>
                        <property name="position">15</property>
                        <property name="name">PersonalData_FirstName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">16</property>
                        <property name="name">PersonalData_Name</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">17</property>
                        <property name="name">PersonalData_Salutation</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">18</property>
                        <property name="name">PersonalData_Title</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">19</property>
                        <property name="name">Phone_Fax</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">20</property>
                        <property name="name">Phone_PrimaryPhone</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">21</property>
                        <property name="name">PostAddress_Address</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">22</property>
                        <property name="name">PostAddress_City</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">23</property>
                        <property name="name">PostAddress_Country</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">24</property>
                        <property name="name">PostAddress_PostCode</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">25</property>
                        <property name="name">PostAddress_Region</property>
                        <property name="dataType">string</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">JFS-Datasource</property>
            <list-property name="parameters">
                <structure>
                    <property name="name">propertySetID</property>
                    <property name="nativeName">propertySetID</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                    <property name="position">1</property>
                    <expression name="defaultValue">'__DUMMY_DEFAULT_PARAMETER_VALUE__'</expression>
                    <property name="isOptional">false</property>
                    <property name="allowNull">true</property>
                    <property name="isInput">true</property>
                </structure>
            </list-property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">DisplayName</property>
                    <property name="nativeName">DisplayName</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">BankData_AccountHolder</property>
                    <property name="nativeName">BankData_AccountHolder</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">BankData_AccountNumber</property>
                    <property name="nativeName">BankData_AccountNumber</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">2</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">BankData_BankCode</property>
                    <property name="nativeName">BankData_BankCode</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">BankData_BankName</property>
                    <property name="nativeName">BankData_BankName</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">Comment_Comment</property>
                    <property name="nativeName">Comment_Comment</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">7</property>
                    <property name="name">CreditCard_CreditCardHolder</property>
                    <property name="nativeName">CreditCard_CreditCardHolder</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">8</property>
                    <property name="name">CreditCard_ExpiryMonth</property>
                    <property name="nativeName">CreditCard_ExpiryMonth</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">2</property>
                </structure>
                <structure>
                    <property name="position">9</property>
                    <property name="name">CreditCard_ExpiryYear</property>
                    <property name="nativeName">CreditCard_ExpiryYear</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">2</property>
                </structure>
                <structure>
                    <property name="position">10</property>
                    <property name="name">CreditCard_Number</property>
                    <property name="nativeName">CreditCard_Number</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">11</property>
                    <property name="name">Internet_EMail</property>
                    <property name="nativeName">Internet_EMail</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">12</property>
                    <property name="name">Internet_Homepage</property>
                    <property name="nativeName">Internet_Homepage</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">13</property>
                    <property name="name">PersonalData_Company</property>
                    <property name="nativeName">PersonalData_Company</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">14</property>
                    <property name="name">PersonalData_DateOfBirth</property>
                    <property name="nativeName">PersonalData_DateOfBirth</property>
                    <property name="dataType">date</property>
                    <property name="nativeDataType">5</property>
                </structure>
                <structure>
                    <property name="position">15</property>
                    <property name="name">PersonalData_FirstName</property>
                    <property name="nativeName">PersonalData_FirstName</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">16</property>
                    <property name="name">PersonalData_Name</property>
                    <property name="nativeName">PersonalData_Name</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">17</property>
                    <property name="name">PersonalData_Salutation</property>
                    <property name="nativeName">PersonalData_Salutation</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">18</property>
                    <property name="name">PersonalData_Title</property>
                    <property name="nativeName">PersonalData_Title</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">19</property>
                    <property name="name">Phone_Fax</property>
                    <property name="nativeName">Phone_Fax</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">20</property>
                    <property name="name">Phone_PrimaryPhone</property>
                    <property name="nativeName">Phone_PrimaryPhone</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">21</property>
                    <property name="name">PostAddress_Address</property>
                    <property name="nativeName">PostAddress_Address</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">22</property>
                    <property name="name">PostAddress_City</property>
                    <property name="nativeName">PostAddress_City</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">23</property>
                    <property name="name">PostAddress_Country</property>
                    <property name="nativeName">PostAddress_Country</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">24</property>
                    <property name="name">PostAddress_PostCode</property>
                    <property name="nativeName">PostAddress_PostCode</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">25</property>
                    <property name="name">PostAddress_Region</property>
                    <property name="nativeName">PostAddress_Region</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
            </list-property>
            <property name="queryText">&lt;queryPropertySet>&lt;org.nightlabs.jfire.reporting.oda.jfs.JFSQueryPropertySet>
  &lt;scriptRegistryItemID>
    &lt;organisationID>dev.jfire.org&lt;/organisationID>
    &lt;scriptRegistryItemType>JFireReporting-Scripting-PropertySet&lt;/scriptRegistryItemType>
    &lt;scriptRegistryItemID>PropertySet&lt;/scriptRegistryItemID>
  &lt;/scriptRegistryItemID>
  &lt;properties class="tree-map">
    &lt;no-comparator/>
    &lt;entry>
      &lt;string>linkClass&lt;/string>
      &lt;string>org.nightlabs.jfire.person.Person&lt;/string>
    &lt;/entry>
    &lt;entry>
      &lt;string>scope&lt;/string>
      &lt;string>default&lt;/string>
    &lt;/entry>
  &lt;/properties>
&lt;/org.nightlabs.jfire.reporting.oda.jfs.JFSQueryPropertySet>&lt;/queryPropertySet></property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>1.0</Version>
  <design:DataSetParameters>
    <design:parameterDefinitions>
      <design:inOutMode>In</design:inOutMode>
      <design:attributes>
        <design:name>propertySetID</design:name>
        <design:position>1</design:position>
        <design:nativeDataTypeCode>1</design:nativeDataTypeCode>
        <design:precision>0</design:precision>
        <design:scale>0</design:scale>
        <design:nullability>Nullable</design:nullability>
      </design:attributes>
      <design:inputAttributes>
        <design:elementAttributes>
          <design:defaultScalarValue>__DUMMY_DEFAULT_PARAMETER_VALUE__</design:defaultScalarValue>
        </design:elementAttributes>
      </design:inputAttributes>
    </design:parameterDefinitions>
  </design:DataSetParameters>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <oda-data-set extensionID="org.nightlabs.jfire.reporting.oda.jfs.JFSDataSet" name="OrganisationData" id="216">
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">DisplayName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">BankData_AccountHolder</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">BankData_AccountNumber</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">BankData_BIC</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">BankData_BankCode</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">BankData_BankName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">7</property>
                        <property name="name">BankData_IBAN</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">8</property>
                        <property name="name">Comment_Comment</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">9</property>
                        <property name="name">CreditCard_CreditCardHolder</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">10</property>
                        <property name="name">CreditCard_ExpiryMonth</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">11</property>
                        <property name="name">CreditCard_ExpiryYear</property>
                        <property name="dataType">integer</property>
                    </structure>
                    <structure>
                        <property name="position">12</property>
                        <property name="name">CreditCard_Number</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">13</property>
                        <property name="name">GovernmentalData_NationalTaxNumber</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">14</property>
                        <property name="name">GovernmentalData_TradeRegisterName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">15</property>
                        <property name="name">GovernmentalData_TradeRegisterNumber</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">16</property>
                        <property name="name">GovernmentalData_VATIN</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">17</property>
                        <property name="name">Internet_EMail</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">18</property>
                        <property name="name">Internet_Homepage</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">19</property>
                        <property name="name">PersonalData_Company</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">20</property>
                        <property name="name">PersonalData_DateOfBirth</property>
                        <property name="dataType">date</property>
                    </structure>
                    <structure>
                        <property name="position">21</property>
                        <property name="name">PersonalData_FirstName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">22</property>
                        <property name="name">PersonalData_Name</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">23</property>
                        <property name="name">PersonalData_Photo</property>
                        <property name="dataType">any</property>
                    </structure>
                    <structure>
                        <property name="position">24</property>
                        <property name="name">PersonalData_Salutation</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">25</property>
                        <property name="name">PersonalData_Title</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">26</property>
                        <property name="name">Phone_Fax</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">27</property>
                        <property name="name">Phone_PrimaryPhone</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">28</property>
                        <property name="name">PostAddress_Address</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">29</property>
                        <property name="name">PostAddress_City</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">30</property>
                        <property name="name">PostAddress_Country</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">31</property>
                        <property name="name">PostAddress_PostCode</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">32</property>
                        <property name="name">PostAddress_Region</property>
                        <property name="dataType">string</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">JFS-Datasource</property>
            <list-property name="parameters">
                <structure>
                    <property name="name">propertySetID</property>
                    <property name="nativeName">propertySetID</property>
                    <property name="dataType">any</property>
                    <property name="nativeDataType">10</property>
                    <property name="position">1</property>
                    <expression name="defaultValue">'__DUMMY_DEFAULT_PARAMETER_VALUE__'</expression>
                    <property name="isOptional">false</property>
                    <property name="allowNull">true</property>
                    <property name="isInput">true</property>
                </structure>
            </list-property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">DisplayName</property>
                    <property name="nativeName">DisplayName</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">BankData_AccountHolder</property>
                    <property name="nativeName">BankData_AccountHolder</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">BankData_AccountNumber</property>
                    <property name="nativeName">BankData_AccountNumber</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">BankData_BIC</property>
                    <property name="nativeName">BankData_BIC</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">BankData_BankCode</property>
                    <property name="nativeName">BankData_BankCode</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">BankData_BankName</property>
                    <property name="nativeName">BankData_BankName</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">7</property>
                    <property name="name">BankData_IBAN</property>
                    <property name="nativeName">BankData_IBAN</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">8</property>
                    <property name="name">Comment_Comment</property>
                    <property name="nativeName">Comment_Comment</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">9</property>
                    <property name="name">CreditCard_CreditCardHolder</property>
                    <property name="nativeName">CreditCard_CreditCardHolder</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">10</property>
                    <property name="name">CreditCard_ExpiryMonth</property>
                    <property name="nativeName">CreditCard_ExpiryMonth</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">11</property>
                    <property name="name">CreditCard_ExpiryYear</property>
                    <property name="nativeName">CreditCard_ExpiryYear</property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">2</property>
                </structure>
                <structure>
                    <property name="position">12</property>
                    <property name="name">CreditCard_Number</property>
                    <property name="nativeName">CreditCard_Number</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">13</property>
                    <property name="name">GovernmentalData_NationalTaxNumber</property>
                    <property name="nativeName">GovernmentalData_NationalTaxNumber</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">14</property>
                    <property name="name">GovernmentalData_TradeRegisterName</property>
                    <property name="nativeName">GovernmentalData_TradeRegisterName</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">15</property>
                    <property name="name">GovernmentalData_TradeRegisterNumber</property>
                    <property name="nativeName">GovernmentalData_TradeRegisterNumber</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">16</property>
                    <property name="name">GovernmentalData_VATIN</property>
                    <property name="nativeName">GovernmentalData_VATIN</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">17</property>
                    <property name="name">Internet_EMail</property>
                    <property name="nativeName">Internet_EMail</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">18</property>
                    <property name="name">Internet_Homepage</property>
                    <property name="nativeName">Internet_Homepage</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">19</property>
                    <property name="name">PersonalData_Company</property>
                    <property name="nativeName">PersonalData_Company</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">20</property>
                    <property name="name">PersonalData_DateOfBirth</property>
                    <property name="nativeName">PersonalData_DateOfBirth</property>
                    <property name="dataType">date</property>
                    <property name="nativeDataType">5</property>
                </structure>
                <structure>
                    <property name="position">21</property>
                    <property name="name">PersonalData_FirstName</property>
                    <property name="nativeName">PersonalData_FirstName</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">22</property>
                    <property name="name">PersonalData_Name</property>
                    <property name="nativeName">PersonalData_Name</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">23</property>
                    <property name="name">PersonalData_Photo</property>
                    <property name="nativeName">PersonalData_Photo</property>
                    <property name="dataType">any</property>
                    <property name="nativeDataType">9</property>
                </structure>
                <structure>
                    <property name="position">24</property>
                    <property name="name">PersonalData_Salutation</property>
                    <property name="nativeName">PersonalData_Salutation</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">25</property>
                    <property name="name">PersonalData_Title</property>
                    <property name="nativeName">PersonalData_Title</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">26</property>
                    <property name="name">Phone_Fax</property>
                    <property name="nativeName">Phone_Fax</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">27</property>
                    <property name="name">Phone_PrimaryPhone</property>
                    <property name="nativeName">Phone_PrimaryPhone</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">28</property>
                    <property name="name">PostAddress_Address</property>
                    <property name="nativeName">PostAddress_Address</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">29</property>
                    <property name="name">PostAddress_City</property>
                    <property name="nativeName">PostAddress_City</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">30</property>
                    <property name="name">PostAddress_Country</property>
                    <property name="nativeName">PostAddress_Country</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">31</property>
                    <property name="name">PostAddress_PostCode</property>
                    <property name="nativeName">PostAddress_PostCode</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
                <structure>
                    <property name="position">32</property>
                    <property name="name">PostAddress_Region</property>
                    <property name="nativeName">PostAddress_Region</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">1</property>
                </structure>
            </list-property>
            <property name="queryText">&lt;queryPropertySet>&lt;org.nightlabs.jfire.reporting.oda.jfs.JFSQueryPropertySet>
  &lt;scriptRegistryItemID>
    &lt;organisationID>dev.jfire.org&lt;/organisationID>
    &lt;scriptRegistryItemType>JFireReporting-Scripting-PropertySet&lt;/scriptRegistryItemType>
    &lt;scriptRegistryItemID>PropertySet&lt;/scriptRegistryItemID>
  &lt;/scriptRegistryItemID>
  &lt;properties>
    &lt;entry>
      &lt;string>structScope&lt;/string>
      &lt;string>default&lt;/string>
    &lt;/entry>
    &lt;entry>
      &lt;string>linkClass&lt;/string>
      &lt;string>org.nightlabs.jfire.person.Person&lt;/string>
    &lt;/entry>
    &lt;entry>
      &lt;string>structLocalScope&lt;/string>
      &lt;string>default&lt;/string>
    &lt;/entry>
  &lt;/properties>
&lt;/org.nightlabs.jfire.reporting.oda.jfs.JFSQueryPropertySet>&lt;/queryPropertySet></property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>1.0</Version>
  <design:DataSetParameters>
    <design:parameterDefinitions>
      <design:inOutMode>In</design:inOutMode>
      <design:attributes>
        <design:name>propertySetID</design:name>
        <design:position>1</design:position>
        <design:nativeDataTypeCode>10</design:nativeDataTypeCode>
        <design:precision>0</design:precision>
        <design:scale>0</design:scale>
        <design:nullability>Nullable</design:nullability>
      </design:attributes>
      <design:inputAttributes>
        <design:elementAttributes>
          <design:defaultScalarValue>__DUMMY_DEFAULT_PARAMETER_VALUE__</design:defaultScalarValue>
        </design:elementAttributes>
      </design:inputAttributes>
    </design:parameterDefinitions>
  </design:DataSetParameters>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
        <script-data-set name="PriceFragmentType2SumDataSet" id="280">
            <list-property name="resultSetHints">
                <structure>
                    <property name="position">1</property>
                    <property name="name">priceFragmentType</property>
                    <property name="dataType">any</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">priceFragmentTypeName</property>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">priceFragmentTypeSum</property>
                    <property name="dataType">float</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">currency</property>
                </structure>
            </list-property>
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">priceFragmentType</property>
                </structure>
                <structure>
                    <property name="columnName">priceFragmentTypeName</property>
                </structure>
                <structure>
                    <property name="columnName">priceFragmentTypeSum</property>
                </structure>
                <structure>
                    <property name="columnName">currency</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">priceFragmentType</property>
                        <property name="dataType">any</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">priceFragmentTypeName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">priceFragmentTypeSum</property>
                        <property name="dataType">float</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">currency</property>
                        <property name="dataType">any</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">JS-Datasource</property>
            <method name="open"><![CDATA[priceFragmentType2currency2sum = JFireReportingHelper.getVar("priceFragmentType2currency2sum");

list = new Packages.java.util.LinkedList();

for (it1 = priceFragmentType2currency2sum.entrySet().iterator(); it1.hasNext(); ) {
	me1 = it1.next();
	priceFragmentType = me1.getKey();
	currency2sum = me1.getValue();

	for (it2 = currency2sum.entrySet().iterator(); it2.hasNext(); ) {
		me2 = it2.next();
		currency = me2.getKey();
		sum = me2.getValue();

		list.add(
			new Array(
				priceFragmentType, currency, sum
			)
		);
	}
}

resultSetIterator = list.iterator();]]></method>
            <method name="fetch"><![CDATA[if (!resultSetIterator.hasNext())
	return false;

record = resultSetIterator.next();
priceFragmentType = record[0];
currency = record[1];
sumAmount = record[2];

row["priceFragmentType"] = priceFragmentType;
row["priceFragmentTypeName"] = priceFragmentType.getName().getText(reportContext.getLocale());
row["priceFragmentTypeSum"] = sumAmount;
row["currency"] = currency;

return true;]]></method>
        </script-data-set>
        <script-data-set name="DummyDataSet" id="323">
            <structure name="cachedMetaData"/>
            <property name="dataSource">JS-Datasource</property>
            <method name="fetch"><![CDATA[return  false;]]></method>
        </script-data-set>
    </data-sets>
    <styles>
        <style name="HeaderText" id="390">
            <property name="fontFamily">sans-serif</property>
            <property name="fontSize">10pt</property>
        </style>
        <style name="BodyText" id="391">
            <property name="fontFamily">sans-serif</property>
            <property name="fontSize">12pt</property>
            <property name="lineHeight">1.5em</property>
        </style>
        <style name="AddressSender" id="399">
            <property name="fontFamily">"Arial"</property>
            <property name="fontSize">7pt</property>
        </style>
        <style name="AddressRecipient" id="400">
            <property name="fontFamily">sans-serif</property>
            <property name="fontSize">12pt</property>
            <property name="lineHeight">1.5em</property>
        </style>
        <style name="TableHeader" id="401">
            <property name="fontFamily">sans-serif</property>
            <property name="fontSize">10pt</property>
        </style>
        <style name="TableContent" id="402">
            <property name="fontFamily">sans-serif</property>
            <property name="fontSize">10pt</property>
        </style>
    </styles>
    <page-setup>
        <simple-master-page name="Simple MasterPage" id="2">
            <property name="type">a4</property>
            <property name="topMargin">7mm</property>
            <property name="leftMargin">24mm</property>
            <property name="bottomMargin">7mm</property>
            <property name="rightMargin">24mm</property>
            <property name="headerHeight">0mm</property>
            <property name="footerHeight">0mm</property>
            <page-header>
                <grid id="326">
                    <property name="width">100%</property>
                    <column id="327"/>
                    <column id="328"/>
                    <row id="329">
                        <cell id="330">
                            <text id="332">
                                <text-property name="content"><![CDATA[]]></text-property>
                            </text>
                        </cell>
                        <cell id="331"/>
                    </row>
                </grid>
            </page-header>
            <page-footer>
                <grid id="342">
                    <property name="width">100%</property>
                    <column id="343"/>
                    <row id="345">
                        <cell id="347">
                            <property name="paddingTop">8mm</property>
                            <property name="paddingLeft">0pt</property>
                            <property name="paddingBottom">0pt</property>
                            <property name="paddingRight">0pt</property>
                            <property name="textAlign">center</property>
                            <grid id="354">
                                <property name="width">40mm</property>
                                <column id="355"/>
                                <column id="356"/>
                                <column id="357"/>
                                <column id="358"/>
                                <row id="359">
                                    <cell id="360">
                                        <label id="364">
                                            <property name="style">HeaderText</property>
                                            <text-property name="text" key="footer.page.page"></text-property>
                                        </label>
                                    </cell>
                                    <cell id="361">
                                        <property name="textAlign">center</property>
                                        <auto-text id="365">
                                            <property name="style">HeaderText</property>
                                            <property name="type">page-number</property>
                                        </auto-text>
                                    </cell>
                                    <cell id="362">
                                        <property name="textAlign">center</property>
                                        <label id="366">
                                            <property name="style">HeaderText</property>
                                            <text-property name="text" key="footer.page.of"></text-property>
                                        </label>
                                    </cell>
                                    <cell id="363">
                                        <property name="textAlign">left</property>
                                        <auto-text id="367">
                                            <property name="style">HeaderText</property>
                                            <property name="type">total-page</property>
                                        </auto-text>
                                    </cell>
                                </row>
                            </grid>
                        </cell>
                    </row>
                    <row id="388">
                        <cell id="389">
                            <property name="textAlign">center</property>
                            <text-data id="387">
                                <property name="style">HeaderText</property>
                                <property name="paddingTop">1pt</property>
                                <expression name="valueExpr">importClass(Packages.org.nightlabs.jfire.reporting.JFireReportingHelper);
importClass(Packages.org.nightlabs.jfire.security.SecurityReflector);
importClass(Packages.org.nightlabs.jfire.trade.OrganisationLegalEntity);
importClass(Packages.org.nightlabs.jfire.person.PersonStruct);
orgLE = OrganisationLegalEntity.getOrganisationLegalEntity(
  JFireReportingHelper.getPersistenceManager(),
  SecurityReflector.getUserDescriptor().getOrganisationID()
);
orgP = orgLE.getPerson();
result = "";

//////// BankAccount Holder
f = orgP.getPersistentDataFieldByIndex(PersonStruct.BANKDATA_ACCOUNTHOLDER, 0);
if (f != null &amp;&amp; f.getData() != null &amp;&amp; f.getData() != "") {
	if (result != "") result += " | ";
	result += f.getData();
}

//////// Trade register number
f = orgP.getPersistentDataFieldByIndex(PersonStruct.GOVERNMENTALDATA_TRADEREGISTERNUMBER, 0);
if (f != null &amp;&amp; f.getData() != null &amp;&amp; f.getData() != "") {
	if (result != "") result += " | ";
	result += getLocalizedMessage("footer.tradeRegisterNumber") + f.getData();
}

//////// Trade register name
f = orgP.getPersistentDataFieldByIndex(PersonStruct.GOVERNMENTALDATA_TRADEREGISTERNAME, 0);
if (f != null &amp;&amp; f.getData() != null &amp;&amp; f.getData() != "") {
	if (result != "") result += " | ";
	result += getLocalizedMessage("footer.tradeRegisterName") + f.getData();
}

//////// Trade register name
f = orgP.getPersistentDataFieldByIndex(PersonStruct.GOVERNMENTALDATA_VATIN, 0);
if (f != null &amp;&amp; f.getData() != null &amp;&amp; f.getData() != "") {
	if (result != "") result += " | ";
	result += getLocalizedMessage("footer.vatNumber") + f.getData();
}

//////// BankAccount AccountNumber
f = orgP.getPersistentDataFieldByIndex(PersonStruct.BANKDATA_ACCOUNTNUMBER, 0);
if (f != null &amp;&amp; f.getData() != null &amp;&amp; f.getData() != "") {
	if (result != "") result += "&lt;br/>";
	result += getLocalizedMessage("footer.accountNumber") + f.getData();
}

f = orgP.getPersistentDataFieldByIndex(PersonStruct.BANKDATA_BANKCODE, 0);
if (f != null &amp;&amp; f.getData() != null &amp;&amp; f.getData() != "") {
	if (result != "") result += " | ";
	result += getLocalizedMessage("footer.bankCode") + f.getData();
}

f = orgP.getPersistentDataFieldByIndex(PersonStruct.BANKDATA_BANKNAME, 0);
if (f != null &amp;&amp; f.getData() != null &amp;&amp; f.getData() != "") {
	if (result != "") result += " | ";
	result += getLocalizedMessage("footer.bankName") + f.getData();
}


result;</expression>
                                <property name="contentType">html</property>
                            </text-data>
                        </cell>
                    </row>
                </grid>
            </page-footer>
        </simple-master-page>
    </page-setup>
    <body>
        <table id="369">
            <property name="width">100%</property>
            <property name="dataSet">OrganisationData</property>
            <list-property name="paramBindings">
                <structure>
                    <property name="paramName">propertySetID</property>
                    <expression name="expression">importClass(Packages.org.nightlabs.jfire.reporting.JFireReportingHelper);
importClass(Packages.org.nightlabs.jfire.security.SecurityReflector);
importClass(Packages.org.nightlabs.jfire.trade.OrganisationLegalEntity);
importClass(Packages.org.nightlabs.jfire.person.PersonStruct);
importClass(Packages.javax.jdo.JDOHelper);
orgLE = OrganisationLegalEntity.getOrganisationLegalEntity(
  JFireReportingHelper.getPersistenceManager(),
  SecurityReflector.getUserDescriptor().getOrganisationID()
);
JFireReportingHelper.createDataSetParam(JDOHelper.getObjectId(orgLE.getPerson()));</expression>
                </structure>
            </list-property>
            <list-property name="boundDataColumns">
                <structure>
                    <property name="name">DisplayName</property>
                    <expression name="expression">dataSetRow["DisplayName"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">BankData_AccountHolder</property>
                    <expression name="expression">dataSetRow["BankData_AccountHolder"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">BankData_AccountNumber</property>
                    <expression name="expression">dataSetRow["BankData_AccountNumber"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">BankData_BIC</property>
                    <expression name="expression">dataSetRow["BankData_BIC"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">BankData_BankCode</property>
                    <expression name="expression">dataSetRow["BankData_BankCode"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">BankData_BankName</property>
                    <expression name="expression">dataSetRow["BankData_BankName"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">BankData_IBAN</property>
                    <expression name="expression">dataSetRow["BankData_IBAN"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">Comment_Comment</property>
                    <expression name="expression">dataSetRow["Comment_Comment"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">CreditCard_CreditCardHolder</property>
                    <expression name="expression">dataSetRow["CreditCard_CreditCardHolder"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">CreditCard_ExpiryMonth</property>
                    <expression name="expression">dataSetRow["CreditCard_ExpiryMonth"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">CreditCard_ExpiryYear</property>
                    <expression name="expression">dataSetRow["CreditCard_ExpiryYear"]</expression>
                    <property name="dataType">integer</property>
                </structure>
                <structure>
                    <property name="name">CreditCard_Number</property>
                    <expression name="expression">dataSetRow["CreditCard_Number"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">GovernmentalData_NationalTaxNumber</property>
                    <expression name="expression">dataSetRow["GovernmentalData_NationalTaxNumber"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">GovernmentalData_TradeRegisterName</property>
                    <expression name="expression">dataSetRow["GovernmentalData_TradeRegisterName"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">GovernmentalData_TradeRegisterNumber</property>
                    <expression name="expression">dataSetRow["GovernmentalData_TradeRegisterNumber"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">GovernmentalData_VATIN</property>
                    <expression name="expression">dataSetRow["GovernmentalData_VATIN"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">Internet_EMail</property>
                    <expression name="expression">dataSetRow["Internet_EMail"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">Internet_Homepage</property>
                    <expression name="expression">dataSetRow["Internet_Homepage"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PersonalData_Company</property>
                    <expression name="expression">dataSetRow["PersonalData_Company"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PersonalData_DateOfBirth</property>
                    <expression name="expression">dataSetRow["PersonalData_DateOfBirth"]</expression>
                    <property name="dataType">date</property>
                </structure>
                <structure>
                    <property name="name">PersonalData_FirstName</property>
                    <expression name="expression">dataSetRow["PersonalData_FirstName"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PersonalData_Name</property>
                    <expression name="expression">dataSetRow["PersonalData_Name"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PersonalData_Photo</property>
                    <expression name="expression">dataSetRow["PersonalData_Photo"]</expression>
                    <property name="dataType">any</property>
                </structure>
                <structure>
                    <property name="name">PersonalData_Salutation</property>
                    <expression name="expression">dataSetRow["PersonalData_Salutation"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PersonalData_Title</property>
                    <expression name="expression">dataSetRow["PersonalData_Title"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">Phone_Fax</property>
                    <expression name="expression">dataSetRow["Phone_Fax"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">Phone_PrimaryPhone</property>
                    <expression name="expression">dataSetRow["Phone_PrimaryPhone"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PostAddress_Address</property>
                    <expression name="expression">dataSetRow["PostAddress_Address"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PostAddress_City</property>
                    <expression name="expression">dataSetRow["PostAddress_City"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PostAddress_Country</property>
                    <expression name="expression">dataSetRow["PostAddress_Country"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PostAddress_PostCode</property>
                    <expression name="expression">dataSetRow["PostAddress_PostCode"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PostAddress_Region</property>
                    <expression name="expression">dataSetRow["PostAddress_Region"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">HeaderText</property>
                    <expression name="expression">result = "";

//////// Company
f = row["PersonalData_Company"];
if (f != null &amp;&amp; f != "") {
	if (result != "") result += " | ";
	result += f;
}

//////// First name + name
thename = "";
f = row["PersonalData_FirstName"];
if (f != null &amp;&amp; f != "") {
	if (thename != "") thename += " ";
	thename += f;
}
f = row["PersonalData_Name"];
if (f != null &amp;&amp; f != "") {
	if (name != "") thename += " ";
	thename += f;
}
if (thename != "") {
	if (result != "") result += " | ";
	result += thename;
}

articleContainerType = "";
articleContainer = JFireReportingHelper.getVar("articleContainer");
className = articleContainer.getClass().getSimpleName();
articleContainerType = reportContext.getMessage("articleContainer.name."+className, reportContext.getLocale());
articleContainerType = articleContainerType + " " + articleContainer.getArticleContainerIDPrefix() + "/" + articleContainer.getArticleContainerIDAsString()

result + "\n" + articleContainerType;</expression>
                    <property name="dataType">string</property>
                </structure>
            </list-property>
            <column id="376"/>
            <header>
                <row id="370">
                    <property name="height">15mm</property>
                    <list-property name="visibility">
                        <structure>
                            <property name="format">all</property>
                            <expression name="valueExpr">wasFirst = headerFirstRow;
headerFirstRow = false;
wasFirst</expression>
                        </structure>
                    </list-property>
                    <cell id="371">
                        <property name="paddingTop">0pt</property>
                        <property name="paddingLeft">0pt</property>
                        <property name="paddingBottom">0mm</property>
                        <property name="paddingRight">0pt</property>
                        <grid id="379">
                            <property name="width">100%</property>
                            <column id="380"/>
                            <column id="381"/>
                            <row id="382">
                                <cell id="383">
                                    <property name="paddingTop">0mm</property>
                                    <property name="paddingLeft">0pt</property>
                                    <property name="paddingBottom">0pt</property>
                                    <property name="paddingRight">0pt</property>
                                    <property name="verticalAlign">top</property>
                                    <data id="386">
                                        <property name="style">HeaderText</property>
                                        <property name="resultSetColumn">HeaderText</property>
                                    </data>
                                </cell>
                                <cell id="384">
                                    <property name="paddingTop">1pt</property>
                                    <property name="textAlign">right</property>
                                    <property name="verticalAlign">top</property>
                                    <image id="378">
                                        <property name="height">15mm</property>
                                        <property name="size">scale-to-item</property>
                                        <property name="source">expr</property>
                                        <expression name="valueExpr">row["PersonalData_Photo"]</expression>
                                    </image>
                                </cell>
                            </row>
                        </grid>
                    </cell>
                </row>
            </header>
            <detail>
                <row id="372">
                    <cell id="373">
                        <table id="11">
                            <property name="marginTop">0pt</property>
                            <property name="canShrink">false</property>
                            <property name="width">100%</property>
                            <property name="dataSet">CustomerPropretySet</property>
                            <list-property name="paramBindings">
                                <structure>
                                    <property name="paramName">propertySetID</property>
                                    <expression name="expression">importClass(Packages.org.nightlabs.jfire.reporting.JFireReportingHelper);
importClass(Packages.javax.jdo.JDOHelper);
articleContainer = JFireReportingHelper.getJDOObject(params["articleContainerID"]);
customer = JFireReportingHelper.getJDOObject(articleContainer.getCustomerID());
JFireReportingHelper.createDataSetParam(JDOHelper.getObjectId(customer.getPerson()));</expression>
                                </structure>
                            </list-property>
                            <list-property name="boundDataColumns">
                                <structure>
                                    <property name="name">Name</property>
                                    <expression name="expression">dataSetRow["PersonalData_Name"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">FirstName</property>
                                    <expression name="expression">dataSetRow["PersonalData_FirstName"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">PostCode</property>
                                    <expression name="expression">dataSetRow["PostAddress_PostCode"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">City</property>
                                    <expression name="expression">dataSetRow["PostAddress_City"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">Country</property>
                                    <expression name="expression">dataSetRow["PostAddress_Country"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">Company</property>
                                    <expression name="expression">dataSetRow["PersonalData_Company"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">Salutation</property>
                                    <expression name="expression">dataSetRow["PersonalData_Salutation"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">Orgnisation_Description</property>
                                    <expression name="expression">importClass(Packages.org.nightlabs.jfire.reporting.JFireReportingHelper);
importClass(Packages.org.nightlabs.jfire.security.SecurityReflector);
importClass(Packages.org.nightlabs.jfire.trade.OrganisationLegalEntity);
importClass(Packages.org.nightlabs.jfire.person.PersonStruct);
//importClass(Packages.javax.jdo.JDOHelper);
orgLE = OrganisationLegalEntity.getOrganisationLegalEntity(
  JFireReportingHelper.getPersistenceManager(),
  SecurityReflector.getUserDescriptor().getOrganisationID()
);
orgP = orgLE.getPerson();
result = "";

//////// Company
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.PERSONALDATA_COMPANY, 0));
if (f != "") {
	if (result != "") result += " | ";
	result += f;
}

//////// First name + name
thename = "";
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.PERSONALDATA_FIRSTNAME, 0));
if (f != "") {
	if (thename != "") thename += " ";
	thename += f;
}
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.PERSONALDATA_NAME, 0));
if (f != "") {
	if (name != "") thename += " ";
	thename += f;
}
if (thename != "") {
	if (result != "") result += " | ";
	result += thename;
}


result;</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">Organisation_Details</property>
                                    <expression name="expression">importClass(Packages.org.nightlabs.jfire.reporting.JFireReportingHelper);
importClass(Packages.org.nightlabs.jfire.security.SecurityReflector);
importClass(Packages.org.nightlabs.jfire.trade.OrganisationLegalEntity);
importClass(Packages.org.nightlabs.jfire.person.PersonStruct);
orgLE = OrganisationLegalEntity.getOrganisationLegalEntity(
  JFireReportingHelper.getPersistenceManager(),
  SecurityReflector.getUserDescriptor().getOrganisationID()
);
orgP = orgLE.getPerson();
result = "";

//////// Address
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.POSTADDRESS_ADDRESS, 0));
if (f != "") {
	if (result != "") result += " | ";
	result += f;
}

//////// Zip + city
zipCity = "";
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.POSTADDRESS_POSTCODE, 0));
if (f != "") {
	if (zipCity != "") zipCity += " ";
	zipCity += f;
}
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.POSTADDRESS_CITY, 0));
if (f != "") {
	if (zipCity != "") zipCity += " ";
	zipCity += f;
}
if (zipCity != "") {
	if (result != "") result += "\n";
	result += zipCity;
}

//////// Region
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.POSTADDRESS_REGION, 0));
if (f != "") {
	if (result != "") result += "\n";
	result += f;
}

//////// Country
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.POSTADDRESS_COUNTRY, 0));
if (f != "") {
	if (result != "") result += "\n";
	result += f;
}

f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.PHONE_PRIMARY, 0));
if (f != "") {
	if (result != "") result += "\n";
	result += getLocalizedMessage("header.localOrg.phone") + f;
}

f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.FAX, 0));
if (f != "") {
	if (result != "") result += "\n";
	result += getLocalizedMessage("header.localOrg.fax") + f;
}


result;</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">Address_Sender</property>
                                    <expression name="expression">importClass(Packages.org.nightlabs.jfire.reporting.JFireReportingHelper);
importClass(Packages.org.nightlabs.jfire.security.SecurityReflector);
importClass(Packages.org.nightlabs.jfire.trade.OrganisationLegalEntity);
importClass(Packages.org.nightlabs.jfire.person.PersonStruct);
orgLE = OrganisationLegalEntity.getOrganisationLegalEntity(
  JFireReportingHelper.getPersistenceManager(),
  SecurityReflector.getUserDescriptor().getOrganisationID()
);
orgP = orgLE.getPerson();

result = new Array();
resultIndex = 0;
result[resultIndex] = "";

//////// Company
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.PERSONALDATA_COMPANY, 0));
if (f != "") {
	if (result[resultIndex] != "") result[resultIndex] += " | ";
	result[resultIndex] += f;
}

//////// First thename + thename
thename = "";
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.PERSONALDATA_FIRSTNAME, 0));
if (f != "") {
	if (thename != "") thename += " ";
	thename += f;
}
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.PERSONALDATA_NAME, 0));
if (f != "") {
	if (thename != "") thename += " ";
	thename += f;
}
if (thename != "") {
	if (result[resultIndex] != "") result[resultIndex] += " | ";
	result[resultIndex] += thename;
}



++resultIndex; result[resultIndex] = "";

//////// Address
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.POSTADDRESS_ADDRESS, 0));
if (f != "") {
	if (result[resultIndex] != "") result[resultIndex] += " | ";
	result[resultIndex] += f;
}

//////// Zip + city
zipCity = "";
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.POSTADDRESS_POSTCODE, 0));
if (f != "") {
	if (zipCity != "") zipCity += " ";
	zipCity += f;
}
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.POSTADDRESS_CITY, 0));
if (f != "") {
	if (zipCity != "") zipCity += " ";
	zipCity += f;
}
if (zipCity != "") {
	if (result[resultIndex] != "") result[resultIndex] += " | ";
	result[resultIndex] += zipCity;
}

//////// Region
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.POSTADDRESS_REGION, 0));
if (f != "") {
	if (result[resultIndex] != "") result[resultIndex] += " | ";
	result[resultIndex] += f;
}

//////// Country
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.POSTADDRESS_COUNTRY, 0));
if (f != "") {
	if (result[resultIndex] != "") result[resultIndex] += " | ";
	result[resultIndex] += f;
}


resultAll = "";

for (i = 0; i &lt; result.length; ++i) {
	if (result[i] != "") {
		if (i > 0) resultAll += " | ";
		resultAll += result[i];
	}
}
resultAll;</expression>
                                    <property name="dataType">any</property>
                                </structure>
                                <structure>
                                    <property name="name">Address_Recipient</property>
                                    <expression name="expression">result = "";

//////// Company
f = dataSetRow["PersonalData_Company"];
if (f != null &amp;&amp; f != "") {
	if (result != "") result += "\n";
	result += f;
}

//////// First thename + thename
thename = "";
f = dataSetRow["PersonalData_FirstName"];
if (f != null &amp;&amp; f != "") {
	if (thename != "") thename += " ";
	thename += f;
}
f = dataSetRow["PersonalData_Name"];
if (f != null &amp;&amp; f != "") {
	if (thename != "") thename += " ";
	thename += f;
}
if (thename != "") {
	if (result != "") result += "\n";
	result += thename;
}

//////// Address
f = dataSetRow["PostAddress_Address"];
if (f != null &amp;&amp; f != "") {
	if (result != "") result += "\n";
	result += f;
}

//////// Zip + city
zipCity = "";
f = dataSetRow["PostAddress_PostCode"];
if (f != null &amp;&amp; f != "") {
	if (zipCity != "") zipCity += " ";
	zipCity += f;
}
f = dataSetRow["PostAddress_City"];
if (f != null &amp;&amp; f != "") {
	if (zipCity != "") zipCity += " ";
	zipCity += f;
}
if (zipCity != "") {
	if (result != "") result += "\n";
	result += zipCity;
}

//////// Region
f = dataSetRow["PostAddress_Region"]
if (f != null &amp;&amp; f != "") {
	if (result != "") result += "\n";
	result += f;
}

//////// Country
f = dataSetRow["PostAddress_Country"]
if (f != null &amp;&amp; f != "") {
	if (result != "") result += "\n";
	result += f;
}

result</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">ArticleContainerIDString</property>
                                    <expression name="expression">articleContainerType = "";
articleContainer = JFireReportingHelper.getVar("articleContainer");
className = articleContainer.getClass().getSimpleName();
articleContainerType = reportContext.getMessage("articleContainer.name."+className, reportContext.getLocale());
articleContainerType + " " + articleContainer.getArticleContainerIDPrefix() + "/" + articleContainer.getArticleContainerIDAsString()</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">ArticleContainerNotFinalizedNote</property>
                                    <expression name="expression">articleContainer = JFireReportingHelper.getVar("articleContainer");
className = articleContainer.getClass().getSimpleName();
if (className == "Order")
  reportContext.getMessage("message.draft.order", reportContext.getLocale())
else
  reportContext.getMessage("message.draft", reportContext.getLocale())</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">Organisation_Details_Web</property>
                                    <expression name="expression">importClass(Packages.org.nightlabs.jfire.reporting.JFireReportingHelper);
importClass(Packages.org.nightlabs.jfire.security.SecurityReflector);
importClass(Packages.org.nightlabs.jfire.trade.OrganisationLegalEntity);
importClass(Packages.org.nightlabs.jfire.person.PersonStruct);
orgLE = OrganisationLegalEntity.getOrganisationLegalEntity(
  JFireReportingHelper.getPersistenceManager(),
  SecurityReflector.getUserDescriptor().getOrganisationID()
);
orgP = orgLE.getPerson();
result = "";


//////// Email  Website
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.INTERNET_EMAIL, 0));
if (f != "") {
	if (result != "") result += "\n";
	result += f;
}
f = getDataFieldString(orgP.getPersistentDataFieldByIndex(PersonStruct.INTERNET_HOMEPAGE, 0));
if (f != "") {
	if (result != "") result += "\n";
	result += f;
}


result;</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">PrintDate</property>
                                    <expression name="expression">new Date()</expression>
                                    <property name="dataType">date-time</property>
                                </structure>
                                <structure>
                                    <property name="name">Header_PrintDate</property>
                                    <expression name="expression">importClass(Packages.java.text.DateFormat);
df = DateFormat.getDateInstance(DateFormat.LONG, reportContext.getLocale());

reportContext.getMessage("header.printedOn", reportContext.getLocale()) + df.format(new Date())</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">Header_ArticleContainer_Date</property>
                                    <expression name="expression">importClass(Packages.java.text.DateFormat);
df = DateFormat.getDateInstance(DateFormat.LONG, reportContext.getLocale());

articleContainerType = "";
articleContainer = JFireReportingHelper.getVar("articleContainer");
className = articleContainer.getClass().getSimpleName();
articleContainerType = reportContext.getMessage("articleContainer.name."+className, reportContext.getLocale());

articleContainerType + reportContext.getMessage("header.articleContainerFrom", reportContext.getLocale())  + df.format(articleContainer.getCreateDT())</expression>
                                    <property name="dataType">string</property>
                                </structure>
                            </list-property>
                            <column id="18"/>
                            <detail>
                                <row id="14">
                                    <property name="height">50mm</property>
                                    <cell id="15">
                                        <property name="paddingTop">0pt</property>
                                        <property name="paddingLeft">0pt</property>
                                        <property name="paddingBottom">0pt</property>
                                        <property name="paddingRight">0pt</property>
                                        <grid id="93">
                                            <property name="width">100%</property>
                                            <column id="94">
                                                <property name="width">50%</property>
                                            </column>
                                            <column id="95"/>
                                            <row id="96">
                                                <property name="height">90mm</property>
                                                <cell id="97">
                                                    <property name="paddingTop">0mm</property>
                                                    <property name="paddingLeft">0pt</property>
                                                    <property name="paddingBottom">0pt</property>
                                                    <property name="paddingRight">0pt</property>
                                                    <grid id="392">
                                                        <property name="width">100%</property>
                                                        <column id="393"/>
                                                        <row id="394">
                                                            <property name="height">36mm</property>
                                                            <cell id="395">
                                                                <property name="paddingTop">0pt</property>
                                                                <property name="paddingLeft">0pt</property>
                                                                <property name="paddingBottom">0pt</property>
                                                                <property name="paddingRight">0pt</property>
                                                                <data id="312">
                                                                    <property name="style">HeaderText</property>
                                                                    <property name="paddingTop">1pt</property>
                                                                    <property name="resultSetColumn">Orgnisation_Description</property>
                                                                </data>
                                                                <data id="313">
                                                                    <property name="style">HeaderText</property>
                                                                    <property name="paddingTop">1pt</property>
                                                                    <property name="resultSetColumn">Organisation_Details</property>
                                                                </data>
                                                            </cell>
                                                        </row>
                                                        <row id="396">
                                                            <cell id="397">
                                                                <data id="314">
                                                                    <property name="style">AddressSender</property>
                                                                    <property name="borderBottomColor">#000000</property>
                                                                    <property name="borderBottomStyle">solid</property>
                                                                    <property name="borderBottomWidth">thin</property>
                                                                    <property name="paddingTop">0pt</property>
                                                                    <property name="paddingLeft">0pt</property>
                                                                    <property name="paddingBottom">0pt</property>
                                                                    <property name="paddingRight">0pt</property>
                                                                    <property name="resultSetColumn">Address_Sender</property>
                                                                </data>
                                                                <data id="315">
                                                                    <property name="style">AddressRecipient</property>
                                                                    <property name="paddingTop">0.5em</property>
                                                                    <property name="paddingLeft">0pt</property>
                                                                    <property name="paddingBottom">0pt</property>
                                                                    <property name="paddingRight">0pt</property>
                                                                    <property name="resultSetColumn">Address_Recipient</property>
                                                                </data>
                                                            </cell>
                                                        </row>
                                                    </grid>
                                                </cell>
                                                <cell id="98">
                                                    <property name="textAlign">right</property>
                                                    <grid id="403">
                                                        <property name="width">100%</property>
                                                        <column id="404"/>
                                                        <row id="405">
                                                            <property name="height">36mm</property>
                                                            <cell id="406">
                                                                <property name="verticalAlign">top</property>
                                                                <table id="217">
                                                                    <property name="width">100%</property>
                                                                    <property name="dataSet">OrganisationData</property>
                                                                    <list-property name="paramBindings">
                                                                        <structure>
                                                                            <property name="paramName">propertySetID</property>
                                                                            <expression name="expression">importClass(Packages.org.nightlabs.jfire.reporting.JFireReportingHelper);
importClass(Packages.org.nightlabs.jfire.reporting.textpart.ReportTextPartHelper);
importClass(Packages.org.nightlabs.jfire.security.SecurityReflector);
importClass(Packages.org.nightlabs.jfire.trade.OrganisationLegalEntity);
importClass(Packages.javax.jdo.JDOHelper);
orgLE = OrganisationLegalEntity.getOrganisationLegalEntity(
  JFireReportingHelper.getPersistenceManager(),
  SecurityReflector.getUserDescriptor().getOrganisationID()
);
JFireReportingHelper.createDataSetParam(JDOHelper.getObjectId(orgLE.getPerson()))</expression>
                                                                        </structure>
                                                                    </list-property>
                                                                    <list-property name="boundDataColumns">
                                                                        <structure>
                                                                            <property name="name">DisplayName</property>
                                                                            <expression name="expression">dataSetRow["DisplayName"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">BankData_AccountHolder</property>
                                                                            <expression name="expression">dataSetRow["BankData_AccountHolder"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">BankData_AccountNumber</property>
                                                                            <expression name="expression">dataSetRow["BankData_AccountNumber"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">BankData_BIC</property>
                                                                            <expression name="expression">dataSetRow["BankData_BIC"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">BankData_BankCode</property>
                                                                            <expression name="expression">dataSetRow["BankData_BankCode"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">BankData_BankName</property>
                                                                            <expression name="expression">dataSetRow["BankData_BankName"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">BankData_IBAN</property>
                                                                            <expression name="expression">dataSetRow["BankData_IBAN"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">Comment_Comment</property>
                                                                            <expression name="expression">dataSetRow["Comment_Comment"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">CreditCard_CreditCardHolder</property>
                                                                            <expression name="expression">dataSetRow["CreditCard_CreditCardHolder"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">CreditCard_ExpiryMonth</property>
                                                                            <expression name="expression">dataSetRow["CreditCard_ExpiryMonth"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">CreditCard_ExpiryYear</property>
                                                                            <expression name="expression">dataSetRow["CreditCard_ExpiryYear"]</expression>
                                                                            <property name="dataType">integer</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">CreditCard_Number</property>
                                                                            <expression name="expression">dataSetRow["CreditCard_Number"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">GovernmentalData_NationalTaxNumber</property>
                                                                            <expression name="expression">dataSetRow["GovernmentalData_NationalTaxNumber"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">GovernmentalData_TradeRegisterName</property>
                                                                            <expression name="expression">dataSetRow["GovernmentalData_TradeRegisterName"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">GovernmentalData_TradeRegisterNumber</property>
                                                                            <expression name="expression">dataSetRow["GovernmentalData_TradeRegisterNumber"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">GovernmentalData_VATIN</property>
                                                                            <expression name="expression">dataSetRow["GovernmentalData_VATIN"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">Internet_EMail</property>
                                                                            <expression name="expression">dataSetRow["Internet_EMail"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">Internet_Homepage</property>
                                                                            <expression name="expression">dataSetRow["Internet_Homepage"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PersonalData_Company</property>
                                                                            <expression name="expression">dataSetRow["PersonalData_Company"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PersonalData_DateOfBirth</property>
                                                                            <expression name="expression">dataSetRow["PersonalData_DateOfBirth"]</expression>
                                                                            <property name="dataType">date</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PersonalData_FirstName</property>
                                                                            <expression name="expression">dataSetRow["PersonalData_FirstName"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PersonalData_Name</property>
                                                                            <expression name="expression">dataSetRow["PersonalData_Name"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PersonalData_Photo</property>
                                                                            <expression name="expression">dataSetRow["PersonalData_Photo"]</expression>
                                                                            <property name="dataType">any</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PersonalData_Salutation</property>
                                                                            <expression name="expression">dataSetRow["PersonalData_Salutation"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PersonalData_Title</property>
                                                                            <expression name="expression">dataSetRow["PersonalData_Title"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">Phone_Fax</property>
                                                                            <expression name="expression">dataSetRow["Phone_Fax"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">Phone_PrimaryPhone</property>
                                                                            <expression name="expression">dataSetRow["Phone_PrimaryPhone"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PostAddress_Address</property>
                                                                            <expression name="expression">dataSetRow["PostAddress_Address"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PostAddress_City</property>
                                                                            <expression name="expression">dataSetRow["PostAddress_City"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PostAddress_Country</property>
                                                                            <expression name="expression">dataSetRow["PostAddress_Country"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PostAddress_PostCode</property>
                                                                            <expression name="expression">dataSetRow["PostAddress_PostCode"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                        <structure>
                                                                            <property name="name">PostAddress_Region</property>
                                                                            <expression name="expression">dataSetRow["PostAddress_Region"]</expression>
                                                                            <property name="dataType">string</property>
                                                                        </structure>
                                                                    </list-property>
                                                                    <column id="224"/>
                                                                    <detail>
                                                                        <row id="220">
                                                                            <cell id="221">
                                                                                <image id="226">
                                                                                    <property name="height">20mm</property>
                                                                                    <list-property name="visibility">
                                                                                        <structure>
                                                                                            <property name="format">all</property>
                                                                                            <expression name="valueExpr">row["PersonalData_Photo"] == null</expression>
                                                                                        </structure>
                                                                                    </list-property>
                                                                                    <property name="size">scale-to-item</property>
                                                                                    <property name="source">expr</property>
                                                                                    <expression name="valueExpr">row["PersonalData_Photo"]</expression>
                                                                                </image>
                                                                            </cell>
                                                                        </row>
                                                                    </detail>
                                                                </table>
                                                                <data id="398">
                                                                    <property name="style">HeaderText</property>
                                                                    <property name="paddingTop">1pt</property>
                                                                    <property name="resultSetColumn">Organisation_Details_Web</property>
                                                                </data>
                                                            </cell>
                                                        </row>
                                                        <row id="407">
                                                            <cell id="408">
                                                                <data id="412">
                                                                    <property name="style">BodyText</property>
                                                                    <property name="resultSetColumn">Header_ArticleContainer_Date</property>
                                                                </data>
                                                                <data id="411">
                                                                    <property name="style">BodyText</property>
                                                                    <property name="resultSetColumn">Header_PrintDate</property>
                                                                </data>
                                                            </cell>
                                                        </row>
                                                    </grid>
                                                </cell>
                                            </row>
                                        </grid>
                                    </cell>
                                </row>
                            </detail>
                            <footer>
                                <row id="16">
                                    <property name="height">0.468in</property>
                                    <cell id="17">
                                        <data id="324">
                                            <property name="style">BodyText</property>
                                            <property name="fontWeight">bold</property>
                                            <property name="color">black</property>
                                            <property name="paddingTop">0pt</property>
                                            <property name="paddingLeft">0pt</property>
                                            <property name="paddingBottom">0em</property>
                                            <property name="paddingRight">0pt</property>
                                            <property name="resultSetColumn">ArticleContainerIDString</property>
                                        </data>
                                        <data id="325">
                                            <property name="style">BodyText</property>
                                            <property name="fontWeight">bold</property>
                                            <property name="color">gray</property>
                                            <property name="paddingTop">1mm</property>
                                            <property name="paddingLeft">0pt</property>
                                            <property name="paddingBottom">1mm</property>
                                            <property name="paddingRight">0pt</property>
                                            <list-property name="visibility">
                                                <structure>
                                                    <property name="format">all</property>
                                                    <expression name="valueExpr">articleContainer = JFireReportingHelper.getVar("articleContainer");
className = articleContainer.getClass().getSimpleName();
if (className != "Order") {
  articleContainer.isFinalized()
} else {
  hide = true;
  iter = articleContainer.getOffers().iterator();
  while (iter.hasNext()) {
    offer = iter.next();
    if (!offer.isFinalized()) {
      hide = false;
      break;
    }
  }
  hide
}</expression>
                                                </structure>
                                            </list-property>
                                            <property name="resultSetColumn">ArticleContainerNotFinalizedNote</property>
                                        </data>
                                        <text-data id="227">
                                            <property name="style">BodyText</property>
                                            <property name="paddingTop">2em</property>
                                            <property name="paddingLeft">0pt</property>
                                            <property name="paddingBottom">1em</property>
                                            <property name="paddingRight">0pt</property>
                                            <expression name="valueExpr">importClass(Packages.org.nightlabs.jfire.reporting.textpart.ReportTextPartHelper);
eval(String(ReportTextPartHelper.getEvalString(
  JFireReportingHelper.getDataSetParamObject(params["articleContainerID"]), "salutation")));</expression>
                                            <property name="contentType">html</property>
                                        </text-data>
                                    </cell>
                                </row>
                            </footer>
                        </table>
                        <table id="62">
                            <property name="borderBottomColor">#C0C0C0</property>
                            <property name="borderBottomStyle">solid</property>
                            <property name="borderBottomWidth">thin</property>
                            <property name="borderLeftColor">#C0C0C0</property>
                            <property name="borderLeftStyle">solid</property>
                            <property name="borderLeftWidth">thin</property>
                            <property name="borderRightColor">#C0C0C0</property>
                            <property name="borderRightStyle">solid</property>
                            <property name="borderRightWidth">thin</property>
                            <property name="borderTopColor">#C0C0C0</property>
                            <property name="borderTopStyle">solid</property>
                            <property name="borderTopWidth">thin</property>
                            <property name="marginTop">0pt</property>
                            <property name="marginLeft">0pt</property>
                            <property name="marginBottom">0pt</property>
                            <property name="marginRight">0pt</property>
                            <property name="width">100%</property>
                            <property name="dataSet">InvoiceArticles</property>
                            <list-property name="paramBindings">
                                <structure>
                                    <property name="paramName">articleContainerID</property>
                                    <expression name="expression">importClass(Packages.org.nightlabs.jfire.reporting.JFireReportingHelper);
JFireReportingHelper.createDataSetParam(params["articleContainerID"])</expression>
                                </structure>
                            </list-property>
                            <list-property name="boundDataColumns">
                                <structure>
                                    <property name="name">articleJDOID</property>
                                    <expression name="expression">dataSetRow["articleJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">articleID</property>
                                    <expression name="expression">JFireReportingHelper.getJDOObject(dataSetRow["articleJDOID"]).getArticleIDAsString()</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">allocated</property>
                                    <expression name="expression">dataSetRow["allocated"]</expression>
                                    <property name="dataType">integer</property>
                                </structure>
                                <structure>
                                    <property name="name">allocationPending</property>
                                    <expression name="expression">dataSetRow["allocationPending"]</expression>
                                    <property name="dataType">integer</property>
                                </structure>
                                <structure>
                                    <property name="name">delivered</property>
                                    <expression name="expression">dataSetRow["delivered"]</expression>
                                    <property name="dataType">integer</property>
                                </structure>
                                <structure>
                                    <property name="name">deliveryJDOID</property>
                                    <expression name="expression">dataSetRow["deliveryJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">deliveryNoteJDOID</property>
                                    <expression name="expression">dataSetRow["deliveryNoteJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">createDT</property>
                                    <expression name="expression">dataSetRow["createDT"]</expression>
                                    <property name="dataType">date-time</property>
                                </structure>
                                <structure>
                                    <property name="name">createUserID</property>
                                    <expression name="expression">dataSetRow["createUserID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">createUserJDOID</property>
                                    <expression name="expression">dataSetRow["createUserJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">currencyID</property>
                                    <expression name="expression">dataSetRow["currencyID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">currencyJDOID</property>
                                    <expression name="expression">dataSetRow["currencyJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">invoiceJDOID</property>
                                    <expression name="expression">dataSetRow["invoiceJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">offerJDOID</property>
                                    <expression name="expression">dataSetRow["offerJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">orderJDOID</property>
                                    <expression name="expression">dataSetRow["orderJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">productJDOID</property>
                                    <expression name="expression">dataSetRow["productJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">productTypeJDOID</property>
                                    <expression name="expression">dataSetRow["productTypeJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">productTypeName</property>
                                    <expression name="expression">dataSetRow["productTypeName"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">receptionNoteJDOID</property>
                                    <expression name="expression">dataSetRow["receptionNoteJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">reversed</property>
                                    <expression name="expression">dataSetRow["reversed"]</expression>
                                    <property name="dataType">integer</property>
                                </structure>
                                <structure>
                                    <property name="name">reversingArticleJDOID</property>
                                    <expression name="expression">dataSetRow["reversingArticleJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">reversing</property>
                                    <expression name="expression">dataSetRow["reversing"]</expression>
                                    <property name="dataType">integer</property>
                                </structure>
                                <structure>
                                    <property name="name">reversedArticleJDOID</property>
                                    <expression name="expression">dataSetRow["reversedArticleJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">tariffJDOID</property>
                                    <expression name="expression">dataSetRow["tariffJDOID"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">tariffName</property>
                                    <expression name="expression">dataSetRow["tariffName"]</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">${devOrganisationIDConverted}/__Total__</property>
                                    <expression name="expression">dataSetRow["${devOrganisationIDConverted}/__Total__"]</expression>
                                    <property name="dataType">float</property>
                                </structure>
                                <structure>
                                    <property name="name">SumTotal</property>
                                    <expression name="expression">Total.sum(dataSetRow["${devOrganisationIDConverted}/__Total__"])</expression>
                                    <property name="dataType">float</property>
                                </structure>
                                <structure>
                                    <property name="name">DynamicProductType_Name</property>
                                    <expression name="expression">if (isDynamicProduct(row["productJDOID"]))  {
  product = JFireReportingHelper.getJDOObject(row["productJDOID"]);
  product.getName().getText();
}
// JFireReportingHelper.setBRLineBreaks(</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">Init_pftCurrency2Sum</property>
                                    <expression name="expression">if (JFireReportingHelper.getVar("priceFragmentType2currency2sum") == null) {
  JFireReportingHelper.getVars().put(
    "priceFragmentType2currency2sum", 
    new Packages.java.util.HashMap());
    "Done: "
}</expression>
                                    <property name="dataType">any</property>
                                </structure>
                                <structure>
                                    <property name="name">DynamicProduct_SinglePrice</property>
                                    <expression name="expression">if (isDynamicProduct(row["productJDOID"])) {
  product = JFireReportingHelper.getJDOObject(row["productJDOID"]);
  price = product.getSinglePrice();
//  result = price.getAmountAsDouble()
  result = price.getAmountAsDouble().toFixed(price.getCurrency().getDecimalDigitCount())
}

result</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">DynamicProduct_Qty</property>
                                    <expression name="expression">// Note that this must be of type "STRING", because it returns the unit symbol together
// with the formatted number.

// More correctly, we should test here, if the concrete Product implements
// org.nightlabs.jfire.store.BundleProduct. ...done ;-)
if (isBundleProduct(row["productJDOID"])) {
  product = JFireReportingHelper.getJDOObject(row["productJDOID"]);
  result = Packages.org.nightlabs.l10n.NumberFormatter.formatFloat(
    product.getUnit().toDouble(product.getQuantity()),
    product.getUnit().getDecimalDigitCount()
  ); //+ " " + product.getUnit().getSymbol().getText()
}
else {
// If it is no BundleProduct, one Product instance always represents a quantity of 1.
  result = 1;
}
result</expression>
                                    <property name="dataType">string</property>
                                </structure>
                                <structure>
                                    <property name="name">Sum_PriceFragmentValues</property>
                                    <expression name="expression">result="";

priceFragmentType2currency2sum = JFireReportingHelper.getVar("priceFragmentType2currency2sum");
article = JFireReportingHelper.getJDOObject(row["articleJDOID"]);
price = article.getPrice();
currency = price.getCurrency();
for (it = price.getFragments().iterator(); it.hasNext(); ) {
	priceFragment = it.next();
	priceFragmentType = priceFragment.getPriceFragmentType();
	
	currency2sum = priceFragmentType2currency2sum.get(priceFragmentType);
	if (currency2sum == null) {
		currency2sum = new Packages.java.util.HashMap();
		priceFragmentType2currency2sum.put(priceFragmentType, currency2sum);
	}

	sum = currency2sum.get(currency);
	if (sum == null) {
		sum = 0;
	}

	// We must first assign to some new javascript variables, because otherwise Rhino appends Strings
	// instead of really performing a mathematical addition (1 + 2 = 12 instead of 1 + 2 = 3).
	val = priceFragment.getAmount() * 1;
	sv = sum * 1;
	sum = sv + val;
	currency2sum.put(currency, sum);
}


// debug begin
/*
for (it1 = priceFragmentType2currency2sum.entrySet().iterator(); it1.hasNext(); ) {
	me1 = it1.next();
	priceFragmentType = me1.getKey();
	currency2sum = me1.getValue();

	for (it2 = currency2sum.entrySet().iterator(); it2.hasNext(); ) {
		me2 = it2.next();
		currency = me2.getKey();
		sum = me2.getValue();
		
		result += "(" + priceFragmentType.getName().getText() + "," + currency.getCurrencySymbol() + ")=" + sum + "\n\n";
	}
}
*/
// debug end

result;</expression>
                                    <property name="dataType">any</property>
                                </structure>
                                <structure>
                                    <property name="name">BundleProduct_QtyUnitSymbol</property>
                                    <expression name="expression">if (isBundleProduct(row["productJDOID"])) {
  product = JFireReportingHelper.getJDOObject(row["productJDOID"]);
  result = product.getUnit().getSymbol().getText()
}
else {
  result = "";
}
result</expression>
                                    <property name="dataType">string</property>
                                </structure>
                            </list-property>
                            <column id="81">
                                <property name="width">14mm</property>
                            </column>
                            <column id="82"/>
                            <column id="182">
                                <property name="width">10mm</property>
                            </column>
                            <column id="418">
                                <property name="width">10mm</property>
                            </column>
                            <header>
                                <row id="63">
                                    <property name="backgroundColor">#C0C0C0</property>
                                    <cell id="64">
                                        <property name="paddingLeft">5pt</property>
                                    </cell>
                                    <cell id="66">
                                        <label id="67">
                                            <property name="style">TableHeader</property>
                                            <property name="fontWeight">bold</property>
                                            <text-property name="text" key="articleDescription">Article name</text-property>
                                        </label>
                                    </cell>
                                    <cell id="176">
                                        <label id="183">
                                            <property name="style">TableHeader</property>
                                            <property name="fontWeight">bold</property>
                                            <property name="textAlign">right</property>
                                            <text-property name="text" key="quantity">Qty</text-property>
                                        </label>
                                    </cell>
                                    <cell id="413"/>
                                </row>
                            </header>
                            <detail>
                                <row id="70">
                                    <list-property name="visibility">
                                        <structure>
                                            <property name="format">all</property>
                                            <expression name="valueExpr">isDynamicProduct(row["productJDOID"])</expression>
                                        </structure>
                                    </list-property>
                                    <cell id="71">
                                        <property name="paddingTop">0.25em</property>
                                        <property name="paddingLeft">5pt</property>
                                        <property name="paddingBottom">0.5em</property>
                                        <data id="138">
                                            <property name="style">TableContent</property>
                                            <property name="resultSetColumn">articleID</property>
                                        </data>
                                    </cell>
                                    <cell id="73">
                                        <property name="paddingTop">0.25em</property>
                                        <property name="paddingBottom">0.5em</property>
                                        <data id="139">
                                            <property name="style">TableContent</property>
                                            <property name="resultSetColumn">productTypeName</property>
                                        </data>
                                    </cell>
                                    <cell id="178">
                                        <property name="paddingTop">0.25em</property>
                                        <property name="paddingBottom">0.5em</property>
                                        <text-data id="212">
                                            <property name="style">TableContent</property>
                                            <property name="textAlign">right</property>
                                            <expression name="valueExpr">"1"</expression>
                                            <property name="contentType">html</property>
                                        </text-data>
                                    </cell>
                                    <cell id="414">
                                        <property name="paddingTop">0.25em</property>
                                        <property name="paddingBottom">0.5em</property>
                                    </cell>
                                </row>
                                <row id="193">
                                    <list-property name="visibility">
                                        <structure>
                                            <property name="format">all</property>
                                            <expression name="valueExpr">!isDynamicProduct(row["productJDOID"])</expression>
                                        </structure>
                                    </list-property>
                                    <cell id="194">
                                        <property name="paddingTop">0.25em</property>
                                        <property name="paddingLeft">5pt</property>
                                        <property name="paddingBottom">0.5em</property>
                                        <data id="201">
                                            <property name="style">TableContent</property>
                                            <property name="resultSetColumn">articleID</property>
                                        </data>
                                    </cell>
                                    <cell id="195">
                                        <property name="paddingTop">0.25em</property>
                                        <property name="paddingBottom">0.5em</property>
                                        <data id="316">
                                            <property name="style">TableContent</property>
                                            <property name="resultSetColumn">DynamicProductType_Name</property>
                                        </data>
                                    </cell>
                                    <cell id="198">
                                        <property name="paddingTop">0.25em</property>
                                        <property name="paddingBottom">0.5em</property>
                                        <data id="319">
                                            <property name="style">TableContent</property>
                                            <property name="textAlign">right</property>
                                            <property name="resultSetColumn">DynamicProduct_Qty</property>
                                        </data>
                                    </cell>
                                    <cell id="415">
                                        <property name="paddingTop">0.25em</property>
                                        <property name="paddingBottom">0.5em</property>
                                        <data id="419">
                                            <property name="fontFamily">sans-serif</property>
                                            <property name="fontSize">10pt</property>
                                            <property name="resultSetColumn">BundleProduct_QtyUnitSymbol</property>
                                        </data>
                                    </cell>
                                </row>
                                <row id="261">
                                    <list-property name="visibility">
                                        <structure>
                                            <property name="format">all</property>
                                            <expression name="valueExpr">true</expression>
                                        </structure>
                                    </list-property>
                                    <cell id="262">
                                        <property name="paddingTop">3pt</property>
                                        <property name="paddingLeft">5pt</property>
                                        <property name="paddingBottom">10pt</property>
                                    </cell>
                                    <cell id="263">
                                        <property name="paddingTop">3pt</property>
                                        <property name="paddingBottom">10pt</property>
                                    </cell>
                                    <cell id="266">
                                        <property name="paddingTop">3pt</property>
                                        <property name="paddingBottom">10pt</property>
                                    </cell>
                                    <cell id="416">
                                        <property name="paddingTop">3pt</property>
                                        <property name="paddingBottom">10pt</property>
                                    </cell>
                                </row>
                            </detail>
                            <footer>
                                <row id="132">
                                    <cell id="133"/>
                                    <cell id="134"/>
                                    <cell id="179"/>
                                    <cell id="417"/>
                                </row>
                            </footer>
                        </table>
                        <text-data id="368">
                            <property name="style">BodyText</property>
                            <property name="fontFamily">"Arial"</property>
                            <property name="paddingTop">1em</property>
                            <property name="paddingLeft">0pt</property>
                            <property name="paddingBottom">0pt</property>
                            <property name="paddingRight">0pt</property>
                            <expression name="valueExpr">importClass(Packages.org.nightlabs.jfire.reporting.textpart.ReportTextPartHelper);
eval(String(ReportTextPartHelper.getEvalString(
  JFireReportingHelper.getDataSetParamObject(params["articleContainerID"]), "finish")));</expression>
                            <property name="contentType">html</property>
                        </text-data>
                    </cell>
                </row>
            </detail>
            <footer>
                <row id="374">
                    <cell id="375"/>
                </row>
            </footer>
        </table>
    </body>
</report>
